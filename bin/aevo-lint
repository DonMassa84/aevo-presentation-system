#!/usr/bin/env bash
set -euo pipefail

YAML="content/aevo_master.yaml"
test -f "$YAML" || { echo "FAIL: missing $YAML"; exit 1; }

REQ="$(awk -F: '/^[[:space:]]*duration_sec:[[:space:]]*/ {gsub(/[[:space:]]/,"",$2); print $2; exit}' "$YAML")"
[ -n "${REQ:-}" ] || { echo "FAIL: meta.duration_sec missing"; exit 1; }

SUM="$(awk -F: '/^[[:space:]]*sec:[[:space:]]*/ {gsub(/[[:space:]]/,"",$2); s+=$2} END {print s+0}' "$YAML")"
[ "$SUM" -eq "$REQ" ] || { echo "FAIL: duration $SUM != $REQ"; exit 1; }

echo "OK: aevo-lint"
